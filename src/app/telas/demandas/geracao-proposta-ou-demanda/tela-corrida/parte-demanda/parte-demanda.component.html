<form class="container" [formGroup]="demandaForm">
  <h3>Dados Gerais</h3>
  <hr />
  <div class="etapa-1">
    <div class="titulo" style="display: grid" id="item-1-1">
      <div class="infos" style="display: flex; align-items: center">
        <label style="font-weight: 500" class="me-2"> Título: </label>
        <i
          class="bi bi-info-circle me-2"
          style="font-size: 0.9rem; color: #00579d; cursor: pointer"
          pTooltip="Insira um nome para essa demanda"
          tooltipPosition="top"
        ></i>
      </div>
      <input
        placeholder="Ex: Melhoria em Sistemas de Informação"
        type="text"
        pInputText
        formControlName="tituloDemanda"
        class="input w-100"
      />
    </div>
    <div class="situacao-atual" style="display: grid" id="item-1-2">
      <div class="infos" style="display: flex; align-items: center">
        <label style="font-weight: 500" class="me-2"> Situação Atual: </label>
        <i
          class="bi bi-info-circle me-2"
          style="font-size: 0.9rem; color: #00579d; cursor: pointer"
          pTooltip="Escreva como funciona o sistema atualmente, na empresa"
          tooltipPosition="top"
        ></i>
      </div>
      <div style="display: flex">
        <textarea
          placeholder="Ex: Baixa produção, abrangente de atrasos"
          type="text"
          formControlName="situacaoAtualDemanda"
          pInputText
          class="input w-100"
        ></textarea>
      </div>
    </div>
    <div class="objetivo" style="display: grid" id="item-1-3">
      <div class="infos" style="display: flex; align-items: center">
        <label style="font-weight: 500" class="me-2"> Objetivo Final: </label>
        <i
          class="bi bi-info-circle me-2"
          style="font-size: 0.9rem; color: #00579d; cursor: pointer"
          pTooltip="De que forma sua proposta ajudaria a empresa?"
          tooltipPosition="top"
        ></i>
      </div>
      <div style="display: flex">
        <textarea
          type="text"
          placeholder="Ex: Aumentar a produção com o desenvolvimento de um sistema"
          formControlName="objetivoDemanda"
          pInputText
          class="input w-100"
        ></textarea>
      </div>
    </div>
    <div class="infos" style="display: flex; align-items: center">
      <label style="font-weight: 500" class="me-2"> Centros de Custo: </label>
      <i
        class="bi bi-info-circle me-2"
        style="font-size: 0.9rem; color: #00579d; cursor: pointer"
        pTooltip="Quais sessões se beneficiariam com sua proposta?"
        tooltipPosition="top"
      ></i>
    </div>
    <span spyTarget="gerais" class="p-float-label">
      <p-multiSelect
        class="w-100"
        [options]="centrosCusto"
        [(ngModel)]="selectedCentros"
        placeholder="Selecione os Centros de Custo"
        defaultLabel="Selecione os centros de custo"
        optionLabel="nome"
        display="chip"
        formControlName="centroCustos"
      >
      </p-multiSelect>
    </span>
  </div>

  <h3 class="mt-4" spyTarget="beneficios">Benefícios</h3>
  <hr />
  <div>
    <div formGroupName="beneficioRealDemanda">
      <div class="infos" style="display: flex; align-items: center">
        <label style="font-weight: 500" class="me-2"> Benefício Real: </label>
        <i
          class="bi bi-info-circle me-2"
          style="font-size: 0.9rem; color: #00579d; cursor: pointer"
          pTooltip="Qual seria o lucro mínimo adquirido pela sua proposta?"
          tooltipPosition="top"
        ></i>
      </div>
      <div style="display: flex; justify-content: space-between">
        <div style="width: 90%">
          <p-inputNumber
            style="width: 100%"
            placeholder="Ex: 150.000"
            class="input"
            formControlName="valorBeneficio"
            mode="currency"
            [currency]="currencyMoedaBeneficio1"
            [locale]="localMoedaBeneficio1"
            [minFractionDigits]="2"
          ></p-inputNumber>
        </div>
        <select
          (change)="mudouMoeda($event, 1)"
          class="drop"
          name="plataforma"
          required="required"
          formControlName="moedaBeneficio"
        >
          <option value="Real">BRL</option>
          <option value="Euro">EUR</option>
          <option value="Dollar">DOL</option>
        </select>
      </div>
      <div class="situacao-atual" style="display: grid" id="item-1-2">
        <div class="infos" style="display: flex; align-items: center">
          <label style="font-weight: 500" class="me-2">
            Memória de Cálculo do Benefício Real:
          </label>
          <i
            class="bi bi-info-circle me-2"
            style="font-size: 0.9rem; color: #00579d; cursor: pointer"
            pTooltip="Como você calculou o benefício?"
            tooltipPosition="top"
          ></i>
        </div>
        <textarea
          placeholder="Ex: Para contratar um desenvolvedor ou uma empresa custa em torno..."
          style="width: 100%"
          [rows]="5"
          [cols]="30"
          [autoResize]="true"
          pInputTextarea
          formControlName="memoriaDeCalculoBeneficio"
        ></textarea>
      </div>
    </div>
    <div formGroupName="beneficioPotencialDemanda">
      <div class="objetivo" style="display: grid" id="item-1-3">
        <div class="infos" style="display: flex; align-items: center">
          <label style="font-weight: 500" class="me-2">
            Benefício Potencial:
          </label>
          <i
            class="bi bi-info-circle me-2"
            style="font-size: 0.9rem; color: #00579d; cursor: pointer"
            pTooltip="Qual seria o lucro máximo adquirido pela sua proposta?"
            tooltipPosition="top"
          ></i>
        </div>
        <div style="display: flex; justify-content: space-between">
          <div style="width: 90%">
            <p-inputNumber
              style="width: 100%"
              placeholder="Ex: 20.000"
              class="input"
              formControlName="valorBeneficio"
              mode="currency"
              [currency]="currencyMoedaBeneficio2"
              [locale]="localMoedaBeneficio2"
              [minFractionDigits]="2"
            ></p-inputNumber>
          </div>
          <select
            (change)="mudouMoeda($event, 2)"
            class="drop"
            name="plataforma"
            required="required"
            formControlName="moedaBeneficio"
          >
            <option value="Real">BRL</option>
            <option value="Euro">EUR</option>
            <option value="Dollar">DOL</option>
          </select>
        </div>
      </div>
      <div class="ben-real">
        <div class="infos" style="display: flex; align-items: center">
          <label style="font-weight: 500" class="me-2">
            Memória de Cálculo do Benefício Potencial:
          </label>
          <i
            class="bi bi-info-circle me-2"
            style="font-size: 0.9rem; color: #00579d; cursor: pointer"
            pTooltip="Como você calculou o benefício?"
            tooltipPosition="top"
          ></i>
        </div>
        <div style="display: flex">
          <textarea
            placeholder="Ex: Para contratar um desenvolvedor ou uma empresa custa em torno..."
            style="width: 100%"
            [rows]="5"
            [cols]="30"
            [autoResize]="true"
            pInputTextarea
            formControlName="memoriaDeCalculoBeneficio"
          ></textarea>
        </div>
      </div>
    </div>
    <div style="display: grid">
      <div class="infos" style="display: flex; align-items: center">
        <label style="font-weight: 500" class="me-2">
          Benefício Qualitativo:
        </label>
        <i
          class="bi bi-info-circle me-2"
          style="font-size: 0.9rem; color: #00579d; cursor: pointer"
          pTooltip="Qual seria o benefício em questão de disciplina, controle e planejamento?"
          tooltipPosition="top"
        ></i>
      </div>
      <div style="display: flex">
        <textarea
          placeholder="Ex: O benefício se torna qualitativo porque seu retorno..."
          style="width: 100%"
          [rows]="5"
          [cols]="30"
          [autoResize]="true"
          pInputTextarea
          formControlName="beneficioQualitativoDemanda"
        ></textarea>
      </div>
    </div>
  </div>
  <h3 class="mt-4" spyTarget="adicionais">Adicionais</h3>
  <hr />
  <div>
    <div class="titulo" style="display: grid" id="item-2-1">
      <div class="infos" style="display: flex; align-items: center">
        <label style="font-weight: 500" class="me-2">
          Frequência de Uso do Sistema:
        </label>
        <i
          class="bi bi-info-circle me-2"
          style="font-size: 0.9rem; color: #00579d; cursor: pointer"
          pTooltip="Qual seria a usabilidade do sistema?"
          tooltipPosition="top"
        ></i>
      </div>
      <p-dropdown
        [options]="opcoesDeTamanho"
        placeholder="Selecione a frequência"
        formControlName="frequenciaDeUsoDemanda"
      ></p-dropdown>
    </div>
    <div>
      <div class="infos" style="display: flex; align-items: center">
        <label style="font-weight: 500" class="me-2"> Anexar Documento: </label>
        <i
          class="bi bi-info-circle me-2"
          style="font-size: 0.9rem; color: #00579d; cursor: pointer"
          pTooltip="Deseja adicionar arquivos(PDF, XML, POM...) relacionados a proposta, como pesquisas"
          tooltipPosition="top"
        ></i>
      </div>
      <p-fileUpload
        [chooseLabel]="'Escolher'"
        [uploadLabel]="'Enviar'"
        [cancelLabel]="'Cancelar'"
        [multiple]="true"
        [auto]="true"
        [customUpload]="true"
        (uploadHandler)="uploadDocumentos($event)"
      ></p-fileUpload>
    </div>
  </div>
</form>
