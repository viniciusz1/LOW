<form class="container" [formGroup]="demandaForm" data-bs-spy="scroll" data-bs-target="scroll"
  data-bs-smooth-scroll="true" data-bs-offset="100" class="scrollspy-example-2" tabindex="0">
  <h3>Dados Gerais</h3>
  <hr>
  <section id="section1">
    <div class="titulo" style="display: grid" id="item-1-1">
      <div class="infos" style="display: flex; align-items: center">
        <label style="font-weight: 500" class="me-2"> Título: </label>
        <i class="bi bi-info-circle me-2" style="font-size: 0.9rem; color: #00579d; cursor: pointer"
          pTooltip="Insira um nome para essa demanda" tooltipPosition="top"></i>
      </div>
      <input placeholder="Ex: Melhoria em Sistemas de Informação" type="text" pInputText formControlName="tituloDemanda"
        class="input w-100 "
        [ngClass]="{'ng-dirty ng-invalid': demandaForm.controls.tituloDemanda.errors && demandaForm.controls.tituloDemanda.touched}" />
      <small *ngIf="demandaForm.controls.tituloDemanda.errors && demandaForm.controls.tituloDemanda.touched"
        id="username2-help" class="p-error block">Campo Obrigatório</small>
    </div>
    <div [formGroup]="formEditorEspecial">
      <div class="situacao-atual" style="display: grid" id="item-1-2">
        <div class="infos" style="display: flex; align-items: center">
          <label style="font-weight: 500" class="me-2"> Situação Atual: </label>
          <i class="bi bi-info-circle me-2" style="font-size: 0.9rem; color: #00579d; cursor: pointer"
            pTooltip="Escreva como funciona o sistema atualmente, na empresa" tooltipPosition="top"></i>
        </div>
        <div style="display: grid">
          <div class="NgxEditor__Wrapper editor-demanda"
            [ngClass]="{'ng-dirty ng-invalid': demandaForm.controls.objetivoDemanda.errors && demandaForm.controls.objetivoDemanda.touched}">
            <ngx-editor-menu [editor]="editor" [toolbar]="toolbar"> </ngx-editor-menu>
            <ngx-editor [editor]="editor" formControlName="situacaoAtualDemanda">
            </ngx-editor>
          </div>
          <small
            *ngIf="demandaForm.controls.situacaoAtualDemanda.errors && demandaForm.controls.situacaoAtualDemanda.touched"
            id="username2-help" class="p-error block">Campo Obrigatório</small>
        </div>
      </div>
      <div class="objetivo" style="display: grid" id="item-1-3">
        <div class="infos" style="display: flex; align-items: center">
          <label style="font-weight: 500" class="me-2" (click)="teste()"> Objetivo Final: </label>
          <i class="bi bi-info-circle me-2" style="font-size: 0.9rem; color: #00579d; cursor: pointer"
            pTooltip="De que forma sua proposta ajudaria a empresa?" tooltipPosition="top"></i>
        </div>
        <div style="display: grid">
          <div class="NgxEditor__Wrapper editor-demanda"
            [ngClass]="{'ng-dirty ng-invalid': demandaForm.controls.objetivoDemanda.errors && demandaForm.controls.objetivoDemanda.touched}">
            <ngx-editor-menu [editor]="editorDemanda" [toolbar]="toolbarDemanda"> </ngx-editor-menu>
            <ngx-editor [editor]="editorDemanda" formControlName="objetivoDemanda">
            </ngx-editor>
          </div>
          <small *ngIf="demandaForm.controls.objetivoDemanda.errors && demandaForm.controls.objetivoDemanda.touched"
            id="username2-help" class="p-error block">Campo Obrigatório</small>
        </div>
      </div>
    </div>
    <div formArrayName="centroCustos" class="row align-items-center">
      <label style="font-weight: 500" class="me-2">Centros de Custo <i class="bi bi-info-circle me-2"
          style="font-size: 0.9rem; color: #00579d; cursor: pointer"
          pTooltip="Quais sessões se beneficiariam com sua proposta?" tooltipPosition="top"></i></label>
      <div style="width: 50%; display: -webkit-box;">
        <div class="d-flex flex-column">
          <div *ngFor="let centroCusto of demandaForm.controls.centroCustos.controls; let i = index"
            style="flex-wrap: wrap;" class="mb-1">
            <div [formGroupName]="i" class="d-flex">
              <div class="p-inputgroup" style=" margin-right: 0.5vw;">
                <input style="width: 5vw;" [id]="'porcentagemListaReuniao' + i" pInputText [required]="true"
                  formControlName="porcentagemCentroCusto" placeholder="Porcentagem" />
                <span class="p-inputgroup-addon">%</span>
              </div>
              <input style="width: 10vw; margin-right: 0.5vw;" [id]="'nomeCentroCusto'+i" pInputText [required]="true"
                formControlName="nomeCentroCusto" placeholder="Centro de Custo" />
              <button (click)="removerCentroDeCusto(i)" [disabled]="this.demandaForm.controls.centroCustos.length == 1"
                class="btn btn-danger"><i class="bi bi-trash"></i></button>
            </div>
          </div>
        </div>
        <button class="btn btn-outline-primary ms-2" [disabled]="!demandaForm.controls.centroCustos.valid || !resultado"
          (click)="adicionarCentroCusto()">
          <i class="bi bi-plus-lg" style="font-size: 19px"></i>
        </button>
      </div>
    </div>
  </section>

  <h3 class="mt-4" spyTarget="beneficios">Benefícios</h3>
  <hr>
  <section id="section2">
    <div id="item-2">
      <p-accordion [multiple]="true">
        <p-accordionTab header="Benefício Real" [selected]="true" pTooltip="Não é obrigatório" tooltipPosition="top">
          <div formGroupName="beneficioRealDemanda">
            <div class="infos" style="display: flex; align-items: center">
              <label style="font-weight: 500; margin-top: 0px !important;" class="me-2"> Benefício Real: </label>
              <i class="bi bi-info-circle me-2"
                style="font-size: 0.9rem; color: #00579d; cursor: pointer; margin-top: 0px !important;"
                pTooltip="Qual seria o lucro mínimo adquirido pela sua proposta?" tooltipPosition="top"></i>
            </div>
            <div style="display: flex; justify-content: space-between">
              <input placeholder="Ex: 150.000" style="width: 93%;" type="text" pInputText class="input"
                formControlName="valorBeneficio" />
              <select class="drop" name="plataforma" required="required" formControlName="moedaBeneficio">
                <option value="Real" [selected]="true">BRL</option>
                <option value="Euro">EUR</option>
                <option value="Dollar">DOL</option>
              </select>
            </div>
            <div class="situacao-atual" style="display: grid" id="item-1-2">
              <div class="infos" style="display: flex; align-items: center">
                <label style="font-weight: 500" class="me-2">
                  Memória de Cálculo do Benefício Real:
                </label>
                <i class="bi bi-info-circle me-2" style="font-size: 0.9rem; color: #00579d; cursor: pointer"
                  pTooltip="Como você calculou o benefício?" tooltipPosition="top"></i>
              </div>
              <textarea placeholder="Ex: Para contratar um desenvolvedor ou uma empresa custa em torno..."
                style="width: 100%" [rows]="5" [cols]="30" [autoResize]="true" pInputTextarea
                formControlName="memoriaDeCalculoBeneficio"></textarea>
            </div>
          </div>
        </p-accordionTab>
        <p-accordionTab header="Benefício Potencial" pTooltip="Não é obrigatório" tooltipPosition="top">
          <div formGroupName="beneficioPotencialDemanda">
            <div class="objetivo" style="display: grid" id="item-1-3">
              <div class="infos" style="display: flex; align-items: center">
                <label style="font-weight: 500; margin-top: 0px !important;" class="me-2">
                  Benefício Potencial:
                </label>
                <i class="bi bi-info-circle me-2"
                  style="font-size: 0.9rem; color: #00579d; cursor: pointer; margin-top: 0px !important;"
                  pTooltip="Qual seria o lucro máximo adquirido pela sua proposta?" tooltipPosition="top"></i>
              </div>
              <div style="display: flex; justify-content: space-between">
                <input placeholder="Ex: 20.000" style="width: 93%;" type="text" pInputText class="input"
                  formControlName="valorBeneficio" />
                <select class="drop" name="plataforma" required="required" formControlName="moedaBeneficio">
                  <option value="Real" [selected]="true">BRL</option>
                  <option value="Euro">EUR</option>
                  <option value="Dollar">DOL</option>
                </select>
              </div>
            </div>
            <div class="ben-real">
              <div class="infos" style="display: flex; align-items: center">
                <label style="font-weight: 500" class="me-2">
                  Memória de Cálculo do Benefício Potencial:
                </label>
                <i class="bi bi-info-circle me-2" style="font-size: 0.9rem; color: #00579d; cursor: pointer"
                  pTooltip="Como você calculou o benefício?" tooltipPosition="top"></i>
              </div>
              <div style="display: flex">
                <textarea placeholder="Ex: Para contratar um desenvolvedor ou uma empresa custa em torno..."
                  style="width: 100%" [rows]="5" [cols]="30" [autoResize]="true" pInputTextarea
                  formControlName="memoriaDeCalculoBeneficio"></textarea>
              </div>
            </div>
          </div>
        </p-accordionTab>
        <p-accordionTab header="Benefício Qualitativo" pTooltip="Não é obrigatório" tooltipPosition="top">
          <div style="display: grid">
            <div class="infos" style="display: flex; align-items: center">
              <label style="font-weight: 500; margin-top: 0px !important;" class="me-2">
                Benefício Qualitativo:
              </label>
              <i class="bi bi-info-circle me-2"
                style="font-size: 0.9rem; color: #00579d; cursor: pointer;  margin-top: 0px !important;"
                pTooltip="Qual seria o benefício em questão de disciplina, controle e planejamento?"
                tooltipPosition="top"></i>
            </div>
            <div style="display: grid">
              <textarea placeholder="Ex: O benefício se torna qualitativo porque seu retorno..." style="width: 100%"
                [rows]="5" [cols]="30" [autoResize]="true" pInputTextarea
                formControlName="beneficioQualitativoDemanda"></textarea>
            </div>
          </div>
        </p-accordionTab>
      </p-accordion>
    </div>
  </section>

  <h3 class="mt-4" spyTarget="adicionais">Adicionais</h3>
  <hr>
  <section id="section3">
    <div class="titulo" style="display: grid" id="item-2-1">
      <div class="infos" style="display: flex; align-items: center">
        <label style="font-weight: 500" class="me-2">
          Frequência de Uso do Sistema:
        </label>
        <i class="bi bi-info-circle me-2" style="font-size: 0.9rem; color: #00579d; cursor: pointer"
          pTooltip="Qual seria a usabilidade do sistema?" tooltipPosition="top"></i>
      </div>
      <p-dropdown
        [ngClass]="{'ng-dirty ng-invalid': demandaForm.controls.frequenciaDeUsoDemanda.errors && demandaForm.controls.frequenciaDeUsoDemanda.touched}"
        [options]="opcoesDeTamanho" placeholder="Selecione a frequência"
        formControlName="frequenciaDeUsoDemanda"></p-dropdown>
      <small
        *ngIf="demandaForm.controls.frequenciaDeUsoDemanda.errors && demandaForm.controls.frequenciaDeUsoDemanda.touched"
        id="username2-help" class="p-error block">Campo Obrigatório</small>
    </div>
    <div>
      <div class="infos" style="display: flex; align-items: center">
        <label style="font-weight: 500" class="me-2" (click)="teste()"> Anexar Documento: </label>
        <i class="bi bi-info-circle me-2" style="font-size: 0.9rem; color: #00579d; cursor: pointer"
          pTooltip="Deseja adicionar arquivos(PDF, XML, POM...) relacionados a proposta, como pesquisas"
          tooltipPosition="top"></i>
      </div>
      <p-fileUpload [chooseLabel]="'Escolher'" [uploadLabel]="'Enviar'" [cancelLabel]="'Cancelar'" [multiple]="true"
        [auto]="true" [customUpload]="true" [files]="listaFiles" (uploadHandler)="uploadDocumentos($event)" ></p-fileUpload>
    </div>
  </section>
</form>